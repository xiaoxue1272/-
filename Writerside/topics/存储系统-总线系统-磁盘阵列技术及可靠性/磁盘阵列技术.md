# 磁盘阵列技术

磁盘阵列由多台磁盘存储器组成, 是快速 大容量且高可靠的外存储系统.  
现在常见的独立冗余磁盘阵列(RAID)就是一种由多块独立磁盘构成的冗余阵列.  
RAID技术分为几种不同的等级, 分别可以提供不同的速度 安全性 性价比

**已基本得到公认的有下面八种系列:**  

* RAID0(0级盘阵列):  
**RAID0又称数据分块, 即把数据分布在多个盘上, 没有容错措施.**  
其容量和数据传输率是单机容量的N倍, N为构成盘阵列的磁盘机的总数, I/O传输速率高, 但平均无故障时间MTTF(MeanTimeToFailure)只有单台磁盘机的N分之一, 因此零级盘阵列的可靠性最差.

* RAID1(1级盘阵列):  
**RAID1又称镜像(Mirror)盘, 采用镜像容错来提高可靠性.**  
即每一个工作盘都有一个镜像盘, 每次写数据时必须同时写入镜像盘, 读数据时只从工作盘读出.  
一旦工作盘发生故障立即转入镜像盘, 从镜像盘中读出数据, 然后由系统再恢复工作盘正确数据.  
因此这种方式数据可以重构, 但工作盘和镜像盘必须保持一一对应关系.  
这种盘阵列可靠性很高, 但其有效容量减小到总容量一半以下. 因此RAID1常用于对出错率要求极严的应用场合, 如财政 金融等领域.

* RAID2(2级盘阵列):  
**RAID2又称位交叉, 它采用海明码作盘错检验, 无需在每个扇区之后进行CRC(CyclicReDundancycheck)检验.**  
 海明码是一种(n,k)线性分组码, n为码字的长度, k为数据的位数, r为用于检验的位数, 故有: n=2r－1r=n－k 因此按位交叉存取最有利于作 海明码检验.  
这种盘适于大数据的读写.  
但冗余信息开销还是太大, 阻止了这类盘的广泛应用.

* RAID3(3级盘阵列):  
**RAID3为单盘容错并行传输阵列盘.**  
它的特点是将检验盘减小为一个(RAID2校验盘为多个,DAID1检验盘为1比1), 数据以位或字节的方式存于各盘(分散记录在组内相同扇区号的各个磁盘机上).  
它的优点是整个阵列的带宽可以充分利用, 使批量数据传输时间减小;  
其缺点是每次读写要牵动整个组, 每次只能完成一次

* RAID4(4级盘阵列):  
**RAID4是一种可独立地对组内各盘进行读写的阵列, 其校验盘也只有一个.**  
RAID4和RAID3的区别是: RAID3是按位或按字节交叉存取, 而RAID4是按块(扇区)存取, 可以单独地对某个盘进行操作, 它无需象RAID3那样, 那怕每一次小I/O操作也要涉及全组, 只需涉及组中两台磁盘机(一台数据盘,一台检验盘)即可.  
从而提高了小量数据的I/O速率.

* RAID5(5级盘阵列):  
**RAID5是一种旋转奇偶校验独立存取的阵列.**  
它和RAID1 2 3 4各盘阵列的不同点, 是它没有固定的校验盘, 而是按某种规则把其冗余的奇偶校验信息均匀地分布在阵列所属的所有磁盘上.  
于是在同一台磁盘机上既有数据信息也有校验信息.  
这一改变解决了争用校验盘的问题, 因此RAID5内允许在同一组内并发进行多个写操作.  
所以RAID5即适于大数据量的操作, 也适于各种事务处理.  
它是一种快速, 大容量和容错分布合理的磁盘阵列.

* RAID6(6级盘阵列):  
**RAID6是一种双维奇偶校验独立存取的磁盘阵列.**  
它的冗余的检 纠错信息均匀分布在所有磁盘上,而数据仍以大小可变的块以交叉方式存于各盘.  
这类盘阵列可容许双盘出错.

* RAID7(7级盘阵列):  
**RAID7是在RAID6的基础上, 采用了cache技术, 它使得传输率和响应速度都有较大的提高.**  
Cache是一种高速缓冲存储器, 即数据在写入磁盘阵列以前, 先写入cache中.  
一般采用cache分块大小和磁盘阵列中数据分块大小相同, 即一块cache分块对应一块磁盘分块.  
在写入时将数据分别写入两个独立的cache, 这样即使其中有一个cache出故障, 数据也不会丢失.  
写操作将直接在cache级响应, 然后再转到磁盘阵列.  
数据从cache写到磁盘阵列时, 同一磁道的数据将在一次操作中完成, 避免了不少块数据多次写的问题, 提高了速度.  
在读出时,主机也是直接从cache中读出, 而不是从阵列盘上读取, 减少与磁盘读操作次数, 这样比较充分地利用了磁盘带宽.  
这样cache和磁盘阵列技术的结合, 弥补了磁盘阵列的不足(如分块写请求响应差等缺陷), 从而使整个系统以高效 快速 大容量 高可靠以及灵活 方便的存储系统提供给用户, 从而满足了当前的技术发展的需要, 尤其是多媒体系统的需要.