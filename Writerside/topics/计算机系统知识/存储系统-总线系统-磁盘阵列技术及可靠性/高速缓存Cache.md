# 高速缓存Cache

高速缓存(Cache)是**位于CPU和主存之间**的高速存储子系统

原始意义是指访问速度比一般随机存取存储器(RAM)快的一种高速存储器.  
通常它不像系统主存那样使用DRAM(动态随机存取器)技术, 而**使用昂贵但较快速的SRAM(静态随机存取器)技术**.  
缓存的设置是所有现代计算机系统发挥高性能的重要因素之一.  

![CPU高速缓存(Cache).png](CPU高速缓存(Cache).png)

采用高速缓存的主要目的是:  
**提高存储器的平均访问速度, 使存储器的速度与CPU的速度相匹配**

**Cache的存在对于软件开发者来说是透明的, 其地址变换和数据块的替换算法均由来硬件实现**

**通常Cache是被集成在CPU内部的, 以提高访问速度. 其主要特点是容量小, 速度快, 成本高**

#### 组成
Cache由两部分组成
1. 存储器部分: **用来存放主存的部分复制信息**
2. 控制部分: **判断CPU要访问的信息是否在Cache中, 若在即为命中, 反之则未命中**

#### 三种地址映像
因为处理机都是按主存地址进行访问的, 而应从Cache存储器中读写信息, 因此就需要地址映像  
**即把主存中的地址映射成Cache存储器中的地址. 地址映像方法有三种**

* 直接映像: Cache的块与主存的块一一对应, **地址变换简单 灵活性差**
* 全相联映像: 主存的任意一块可以调入Cache的任意一块空间, 在地址变换时, 讲主存地址高位表示的块号与Cache中的块号进行比较, 若相同则命中. **调入位置不受限制 灵活. 变换比较复杂 速度比较慢**
* 组相联映像: 前两种方式的折中. Cache先分组再分块, **组间采用直接映像 组内采用全相联映像**

#### Cache的性能分析

T~a~ = Cache等效访问时间  
H = Cache命中率  
T~c~ = Cache存取时间  
T~m~ = 主存访问时间  

Cache等效访问时间公式为:  
**T~a~ = H * T~c~ + (1 - H) * T~m~**

使用Cache比不使用Cache所提高的速度倍数公式为:
**r = T~m~ / T~c~**